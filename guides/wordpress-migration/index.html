<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Wordops documentation and user guides"><link rel="shortcut icon" href=../../images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.1.0"><title>WordPress sites migration - WordOps Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.bc7e593a.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab28b872.min.css><meta name=theme-color content=#02a6f2><link rel=manifest href=../../manifest.webmanifest crossorigin=use-credentials><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/asciinema-player.min.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=light-blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#wordpress-sites-migration class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title="WordOps Documentation" class="md-header-nav__button md-logo" aria-label="WordOps Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19.35 10.03A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.03A6.004 6.004 0 000 14a6 6 0 006 6h13a5 5 0 005-5c0-2.64-2.05-4.78-4.65-4.97z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> WordOps Documentation </span> <span class="md-header-nav__topic md-ellipsis"> WordPress sites migration </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/WordOps/WordOps/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../about/give-wordops-github-star/ class=md-tabs__link> About </a> </li> <li class=md-tabs__item> <a href=../../getting-started/prerequesites/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../commands/ class=md-tabs__link> Commands </a> </li> <li class=md-tabs__item> <a href=../../how-to/ class=md-tabs__link> How to </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Guides </a> </li> <li class=md-tabs__item> <a href=https://wordops.net/f-a-q/ class=md-tabs__link> F.A.Q </a> </li> <li class=md-tabs__item> <a href=https://wordops.net class=md-tabs__link> WordOps.net </a> </li> <li class=md-tabs__item> <a href=https://wordops.net/blog/ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a href=https://community.wordops.net class=md-tabs__link> Forum </a> </li> <li class=md-tabs__item> <a href=https://chat.wordops.net class=md-tabs__link> Chat </a> </li> <li class=md-tabs__item> <a href=https://twitter.com/WordOps_ class=md-tabs__link> Twitter </a> </li> <li class=md-tabs__item> <a href=https://mastodon.top/@WordOps class=md-tabs__link> Mastodon </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/bug-reporting/ class=md-tabs__link> Troubleshooting </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="WordOps Documentation" class="md-nav__button md-logo" aria-label="WordOps Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19.35 10.03A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.03A6.004 6.004 0 000 14a6 6 0 006 6h13a5 5 0 005-5c0-2.64-2.05-4.78-4.65-4.97z"/></svg> </a> WordOps Documentation </label> <div class=md-nav__source> <a href=https://github.com/WordOps/WordOps/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/give-wordops-github-star/ class=md-nav__link> Give WordOps a Github star </a> </li> <li class=md-nav__item> <a href=../../about/from-easyengine-to-wordops/ class=md-nav__link> From EasyEngine to WordOps </a> </li> <li class=md-nav__item> <a href=../../about/changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../about/contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../../about/code-of-conduct/ class=md-nav__link> Code of conduct </a> </li> <li class=md-nav__item> <a href=https://github.com/WordOps/WordOps/graphs/contributors class=md-nav__link> Contributors </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/prerequesites/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../getting-started/installation-guide/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../getting-started/post-install-steps/ class=md-nav__link> Post-install steps </a> </li> <li class=md-nav__item> <a href=../../getting-started/creating-sites/ class=md-nav__link> Creating sites </a> </li> <li class=md-nav__item> <a href=../../getting-started/wordops-structure/ class=md-nav__link> WordOps structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Commands <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Commands data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../commands/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../commands/site/ class=md-nav__link> site </a> </li> <li class=md-nav__item> <a href=../../commands/stack/ class=md-nav__link> stack </a> </li> <li class=md-nav__item> <a href=../../commands/debug/ class=md-nav__link> debug </a> </li> <li class=md-nav__item> <a href=../../commands/clean/ class=md-nav__link> clean </a> </li> <li class=md-nav__item> <a href=../../commands/info/ class=md-nav__link> info </a> </li> <li class=md-nav__item> <a href=../../commands/log/ class=md-nav__link> log </a> </li> <li class=md-nav__item> <a href=../../commands/secure/ class=md-nav__link> secure </a> </li> <li class=md-nav__item> <a href=../../commands/maintenance/ class=md-nav__link> maintenance </a> </li> <li class=md-nav__item> <a href=../../commands/update/ class=md-nav__link> update </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> How to <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="How to" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> How to </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../how-to/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../how-to/wp-language/ class=md-nav__link> Set WordPress language </a> </li> <li class=md-nav__item> <a href=../../how-to/secure-22222/ class=md-nav__link> Secure WordOps backend </a> </li> <li class=md-nav__item> <a href=../../how-to/configure-letsencrypt-dns-api-validation/ class=md-nav__link> Configure LetsEncrypt DNS API </a> </li> <li class=md-nav__item> <a href=../../how-to/get-a-plus-grade-ssllabs/ class=md-nav__link> Get A+ grade on ssllabs </a> </li> <li class=md-nav__item> <a href=../../how-to/add-ftp-users/ class=md-nav__link> Add FTP users </a> </li> <li class=md-nav__item> <a href=../../how-to/remote-mysql-server/ class=md-nav__link> Remote MySQL server with WordOps </a> </li> <li class=md-nav__item> <a href=../../how-to/ubuntu-lts-hwe-stacks/ class=md-nav__link> Install HWE stacks on Ubuntu </a> </li> <li class=md-nav__item> <a href=../../how-to/post-install-wp/ class=md-nav__link> Automate WordPress post-install </a> </li> <li class=md-nav__item> <a href=../../how-to/allow-zip-gzip-files-download/ class=md-nav__link> How to allow zip & gzip files download </a> </li> <li class=md-nav__item> <a href=../../how-to/setup-basic-auth/ class=md-nav__link> Setup basic auth on site </a> </li> <li class=md-nav__item> <a href=../../how-to/automate-wordops-install/ class=md-nav__link> Automate WordOps installation </a> </li> <li class=md-nav__item> <a href=../../how-to/microcaching-with-nginx/ class=md-nav__link> Microcaching with Nginx </a> </li> <li class=md-nav__item> <a href=../../how-to/bypass-fastcgi-cache-on-specific-urls/ class=md-nav__link> Bypass fastcgi_cache on specific URLs </a> </li> <li class=md-nav__item> <a href=../../how-to/setup-sendmail-with-sendgrid/ class=md-nav__link> Setup Sendmail with Sendgrid </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6 checked> <label class=md-nav__link for=nav-6> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../migration-from-easyengine/ class=md-nav__link> EasyEngine Migration </a> </li> <li class=md-nav__item> <a href=../manage-ssl-certificates/ class=md-nav__link> LetsEncrypt SSL certificates </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> WordPress sites migration <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> WordPress sites migration </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=#on-the-previous-server-old-srv class=md-nav__link> On the previous server (OLD-SRV) </a> <nav class=md-nav aria-label="On the previous server (OLD-SRV)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dump-wordpress-database class=md-nav__link> Dump WordPress database </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-the-new-server-new-srv class=md-nav__link> On the new server (NEW-SRV) </a> <nav class=md-nav aria-label="On the new server (NEW-SRV)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#initial-server-update class=md-nav__link> Initial server update </a> </li> <li class=md-nav__item> <a href=#install-wordops-and-main-stacks class=md-nav__link> Install WordOps and main stacks </a> </li> <li class=md-nav__item> <a href=#create-wordpress-site-with-same-domain class=md-nav__link> Create wordpress site with same domain </a> </li> <li class=md-nav__item> <a href=#cleanup-default-wp-database-and-remove-files class=md-nav__link> Cleanup default WP database and remove files </a> </li> <li class=md-nav__item> <a href=#setup-a-password-less-ssh-access-between-your-servers class=md-nav__link> Setup a password-less ssh access between your servers </a> <nav class=md-nav aria-label="Setup a password-less ssh access between your servers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#generate-ssh-keys class=md-nav__link> Generate SSH-Keys </a> </li> <li class=md-nav__item> <a href=#add-ssh-public-key-to-old-srv class=md-nav__link> Add SSH Public key to OLD-SRV </a> </li> <li class=md-nav__item> <a href=#ssh-login-without-password class=md-nav__link> SSH Login without password </a> </li> <li class=md-nav__item> <a href=#ssh-alias-and-config class=md-nav__link> SSH Alias and config </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transfer-files-from-old-srv-to-new-srv class=md-nav__link> Transfer files from OLD-SRV to NEW-SRV </a> <nav class=md-nav aria-label="Transfer files from OLD-SRV to NEW-SRV"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#do-not-copy-the-file-wp-configphp class=md-nav__link> Do not copy the file wp-config.php </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#restore-the-database-on-new-srv class=md-nav__link> Restore the database on NEW-SRV </a> </li> <li class=md-nav__item> <a href=#lets-encrypt class=md-nav__link> Let's Encrypt </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../wordops-with-digitalocean-volume/ class=md-nav__link> WordOps With DigitalOcean volumes </a> </li> <li class=md-nav__item> <a href=../enable-live-kernel-patching/ class=md-nav__link> Enable live kernel patching on Ubuntu </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://wordops.net/f-a-q/ class=md-nav__link> F.A.Q </a> </li> <li class=md-nav__item> <a href=https://wordops.net class=md-nav__link> WordOps.net </a> </li> <li class=md-nav__item> <a href=https://wordops.net/blog/ class=md-nav__link> Blog </a> </li> <li class=md-nav__item> <a href=https://community.wordops.net class=md-nav__link> Forum </a> </li> <li class=md-nav__item> <a href=https://chat.wordops.net class=md-nav__link> Chat </a> </li> <li class=md-nav__item> <a href=https://twitter.com/WordOps_ class=md-nav__link> Twitter </a> </li> <li class=md-nav__item> <a href=https://mastodon.top/@WordOps class=md-nav__link> Mastodon </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-14 type=checkbox id=nav-14> <label class=md-nav__link for=nav-14> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Troubleshooting data-md-level=1> <label class=md-nav__title for=nav-14> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../troubleshooting/bug-reporting/ class=md-nav__link> Bug reporting guidelines </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/common-issues/ class=md-nav__link> Common issues </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#context class=md-nav__link> Context </a> </li> <li class=md-nav__item> <a href=#on-the-previous-server-old-srv class=md-nav__link> On the previous server (OLD-SRV) </a> <nav class=md-nav aria-label="On the previous server (OLD-SRV)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dump-wordpress-database class=md-nav__link> Dump WordPress database </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-the-new-server-new-srv class=md-nav__link> On the new server (NEW-SRV) </a> <nav class=md-nav aria-label="On the new server (NEW-SRV)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#initial-server-update class=md-nav__link> Initial server update </a> </li> <li class=md-nav__item> <a href=#install-wordops-and-main-stacks class=md-nav__link> Install WordOps and main stacks </a> </li> <li class=md-nav__item> <a href=#create-wordpress-site-with-same-domain class=md-nav__link> Create wordpress site with same domain </a> </li> <li class=md-nav__item> <a href=#cleanup-default-wp-database-and-remove-files class=md-nav__link> Cleanup default WP database and remove files </a> </li> <li class=md-nav__item> <a href=#setup-a-password-less-ssh-access-between-your-servers class=md-nav__link> Setup a password-less ssh access between your servers </a> <nav class=md-nav aria-label="Setup a password-less ssh access between your servers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#generate-ssh-keys class=md-nav__link> Generate SSH-Keys </a> </li> <li class=md-nav__item> <a href=#add-ssh-public-key-to-old-srv class=md-nav__link> Add SSH Public key to OLD-SRV </a> </li> <li class=md-nav__item> <a href=#ssh-login-without-password class=md-nav__link> SSH Login without password </a> </li> <li class=md-nav__item> <a href=#ssh-alias-and-config class=md-nav__link> SSH Alias and config </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transfer-files-from-old-srv-to-new-srv class=md-nav__link> Transfer files from OLD-SRV to NEW-SRV </a> <nav class=md-nav aria-label="Transfer files from OLD-SRV to NEW-SRV"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#do-not-copy-the-file-wp-configphp class=md-nav__link> Do not copy the file wp-config.php </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#restore-the-database-on-new-srv class=md-nav__link> Restore the database on NEW-SRV </a> </li> <li class=md-nav__item> <a href=#lets-encrypt class=md-nav__link> Let's Encrypt </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/WordOps/docs.wordops.net/edit/master/docs/guides/wordpress-migration.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=wordpress-sites-migration>WordPress sites migration<a class=headerlink href=#wordpress-sites-migration title="Permanent link">&para;</a></h1> <h2 id=context>Context<a class=headerlink href=#context title="Permanent link">&para;</a></h2> <p>You want to migrate a WordPress site hosted on a server running EEv3 or WordOps to a new one running with WordOps. The site you want to migrate was created with the flag <code>--wpredis</code></p> <p>In our example :</p> <ul> <li>new server name is NEW-SRV with IP 10.0.0.1</li> <li>the previous server is OLD-SRV with IP 192.168.0.1</li> <li>site domain is mydomain.tld</li> </ul> <h2 id=on-the-previous-server-old-srv>On the previous server (OLD-SRV)<a class=headerlink href=#on-the-previous-server-old-srv title="Permanent link">&para;</a></h2> <h3 id=dump-wordpress-database>Dump WordPress database<a class=headerlink href=#dump-wordpress-database title="Permanent link">&para;</a></h3> <p>Go into your site directory and dump WordPress database with WP-CLI</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> /var/www/mydomain.tld/htdocs
wp db <span class=nb>export</span> --allow-root
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>If WP-CLI isn't installed on your server, you can get it by running the following commands : <div class=highlight><pre><span></span><code>curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
chmod +x wp-cli.phar
sudo mv wp-cli.phar /usr/local/bin/wp
</code></pre></div></p> </div> <h2 id=on-the-new-server-new-srv>On the new server (NEW-SRV)<a class=headerlink href=#on-the-new-server-new-srv title="Permanent link">&para;</a></h2> <h3 id=initial-server-update>Initial server update<a class=headerlink href=#initial-server-update title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>apt-get update <span class=o>&amp;&amp;</span> apt-get dist-upgrade -y <span class=o>&amp;&amp;</span> apt-get autoremove --purge -y <span class=o>&amp;&amp;</span> apt-get autoclean
</code></pre></div> <h3 id=install-wordops-and-main-stacks>Install WordOps and main stacks<a class=headerlink href=#install-wordops-and-main-stacks title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>wget -qO wo wops.cc <span class=o>&amp;&amp;</span> sudo bash wo
wo stack install
</code></pre></div> <h3 id=create-wordpress-site-with-same-domain>Create wordpress site with same domain<a class=headerlink href=#create-wordpress-site-with-same-domain title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>wo site create mydomain.tld --wpredis
</code></pre></div> <h3 id=cleanup-default-wp-database-and-remove-files>Cleanup default WP database and remove files<a class=headerlink href=#cleanup-default-wp-database-and-remove-files title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>sudo -u www-data -H wp db clean --yes --path<span class=o>=</span>/var/www/mydomain.tld/htdocs
rm -rf /var/www/mydomain.tld/htdocs/*
</code></pre></div> <h3 id=setup-a-password-less-ssh-access-between-your-servers>Setup a password-less ssh access between your servers<a class=headerlink href=#setup-a-password-less-ssh-access-between-your-servers title="Permanent link">&para;</a></h3> <h4 id=generate-ssh-keys>Generate SSH-Keys<a class=headerlink href=#generate-ssh-keys title="Permanent link">&para;</a></h4> <p>If the user on the new server do not have ssh-keys yet, you can generate them with the following command :</p> <div class=highlight><pre><span></span><code>ssh-keygen -t ed25519
</code></pre></div> <p>Then just press enter to confirm ssh key path. Your public ssh key should be available in the directory <code>~/.ssh/</code> ( <code>/root/.ssh/</code> if you are logged in as root )</p> <h4 id=add-ssh-public-key-to-old-srv>Add SSH Public key to OLD-SRV<a class=headerlink href=#add-ssh-public-key-to-old-srv title="Permanent link">&para;</a></h4> <p>You can use the following command to automatically add the public SSH Key to the server :</p> <div class=highlight><pre><span></span><code>ssh-copy-id root@192.168.0.1
</code></pre></div> <p>Otherwise, you can still display the public ssh-key with the command <code>cat ~/.ssh/id_ed25519.pub</code> and copy it manually in the file <code>~/.ssh/authorized_keys</code> of the other server.</p> <h4 id=ssh-login-without-password>SSH Login without password<a class=headerlink href=#ssh-login-without-password title="Permanent link">&para;</a></h4> <p>You should now be able to login from the server where you generated the SSH Keys to the other one without password :</p> <div class=highlight><pre><span></span><code>ssh root@192.168.0.1
</code></pre></div> <h4 id=ssh-alias-and-config>SSH Alias and config<a class=headerlink href=#ssh-alias-and-config title="Permanent link">&para;</a></h4> <p>If you prefer to use an alias to login to OLD-SRV rather than using the IP, or if you want to define a custom SSH port, you just have to create/edit the file <code>~/.ssh/config</code> and to define settings this way :</p> <div class=highlight><pre><span></span><code>Host OLD-SRV
  Hostname <span class=m>192</span>.168.0.1
  Port <span class=m>12345</span>
</code></pre></div> <p>Then you will be able to login with :</p> <div class=highlight><pre><span></span><code>ssh root@OLD-SRV
</code></pre></div> <p>or even with</p> <div class=highlight><pre><span></span><code>ssh OLD-SRV
</code></pre></div> <h3 id=transfer-files-from-old-srv-to-new-srv>Transfer files from OLD-SRV to NEW-SRV<a class=headerlink href=#transfer-files-from-old-srv-to-new-srv title="Permanent link">&para;</a></h3> <p>To safely migrate files from OLD-SRV to NEW-SRV, we will use rsync because it's fast and secure (files transfer is done over SSH). If you have configured password-less SSH login with the previous steps, and defined an alias into <code>~/.ssh/config</code> you can use the following command to copy files from OLD-SRV to NEW-SRV</p> <div class=highlight><pre><span></span><code>rsync -avzh --progress --ignore-existing <span class=se>\</span>
root@OLD-SRV:/var/www/mydomain.tld/htdocs/ <span class=se>\</span>
/var/www/mydomain.tld/htdocs/
</code></pre></div> <p>If you haven't created the file ~/.ssh/config and use custom SSH ports, you can define SSH port with rsync by using the following command :</p> <div class=highlight><pre><span></span><code>rsync -avzh -e <span class=s2>&quot;ssh -p 12345&quot;</span> <span class=se>\</span>
--progress --ignore-existing <span class=se>\</span>
root@old_server_IP:/var/www/mydomain.tld/htdocs/ <span class=se>\</span>
/var/www/mydomain.tld/htdocs/
</code></pre></div> <h4 id=do-not-copy-the-file-wp-configphp>Do not copy the file wp-config.php<a class=headerlink href=#do-not-copy-the-file-wp-configphp title="Permanent link">&para;</a></h4> <p>With WordOps or EasyEngine v3, wp-config.php default path is <code>/var/www/mydomain.tld</code>. If you moved it into htdocs directory, it was probably transfered with rsync during the previous step. In this case remove it or rename it before importing the database on the new server, otherwise WP-CLI may not be able to login into MySQL.</p> <p>Command example to keep previous wp-config.php file as backup :</p> <div class=highlight><pre><span></span><code>mv /var/www/mydomain.tld/htdocs/wp-config.php /var/www/mydomain.tld/wp-config.php.bak
</code></pre></div> <h3 id=restore-the-database-on-new-srv>Restore the database on NEW-SRV<a class=headerlink href=#restore-the-database-on-new-srv title="Permanent link">&para;</a></h3> <p>We will use WP-CLI to easily import the database dump we have previously created on OLD-SRV.</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> /var/www/mydomain.tld/htdocs
wp db import my_domain_tld-2019-07-25-XX44z4.sql --allow-root
rm mydomain_co-2019-07-25-XX44z4.sql
</code></pre></div> <h3 id=lets-encrypt>Let's Encrypt<a class=headerlink href=#lets-encrypt title="Permanent link">&para;</a></h3> <p>If your site was secured with a Let's Encrypt SSL certificate, you can issue a new certificate on NEW-SRV with the command :</p> <div class=highlight><pre><span></span><code>wo site update mydomain.tld -le
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../manage-ssl-certificates/ class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> LetsEncrypt SSL certificates </div> </div> </a> <a href=../wordops-with-digitalocean-volume/ class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> WordOps With DigitalOcean volumes </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2019 WordOps - <a href=http://creativecommons.org/licenses/by-sa/4.0/ rel=license><img style=display:inline; alt="Licence Creative Commons" style=border-width:0 src=https://docs.wordops.net/images/80x15.png></a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://wordops.net target=_blank rel=noopener title=wordops.net class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"/></svg> </a> <a href=https://github.com/WordOps target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/WordOps_ target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://community.wordops.io/slack target=_blank rel=noopener title=community.wordops.io class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://community.wordops.net target=_blank rel=noopener title=community.wordops.net class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.6a3d08fc.min.js></script> <script src=../../assets/javascripts/bundle.71201edf.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../..",
          features: ['navigation.tabs', 'navigation.instant'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=../../js/asciinema-player.js></script> </body> </html>